<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="L-sit Timer" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="theme-color" content="#111111" />
<title>L-sit Timer (iPhone)</title>

<style>
:root{
  --bg:#0f0f0f; --panel:#161616; --border:#2a2a2a;
  --text:#ffffff; --muted:#bdbdbd;
  --accent:#4cff8f; --warn:#ffcc00; --danger:#ff4c4c;
}

*{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

html,body{
  margin:0;
  padding:0;
  height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
}

body{
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:
    env(safe-area-inset-top)
    env(safe-area-inset-right)
    env(safe-area-inset-bottom)
    env(safe-area-inset-left);
}

.wrap{
  width:100%;
  max-width:420px; /* iPhone 實測安全寬 */
  padding:14px;
}

.panel{
  background:linear-gradient(180deg,#151515,#0f0f0f);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  box-shadow:0 14px 40px rgba(0,0,0,.45);
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

h1{
  font-size:17px;
  font-weight:800;
  margin:0;
}

.chip{
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#00000040;
}

/* ===== 固定 2x2 設定區 ===== */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-bottom:16px;
}

label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:12px;
  color:#d6d6d6;
}

input{
  width:100%;
  height:44px;
  padding:0 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#0c0c0c;
  color:#fff;
  font-size:18px;
  line-height:44px;
  -webkit-appearance:none;
  appearance:none;
}

/* ===== 計時顯示 ===== */
.stage{
  text-align:center;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.badge{
  align-self:center;
  padding:6px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#00000040;
  font-size:13px;
}

.time{
  font-size:72px; /* 鎖死，避免跳動 */
  font-weight:900;
  line-height:1.1;
}

.sub{
  font-size:14px;
  color:var(--muted);
}

/* ===== 按鈕 ===== */
.controls{
  display:flex;
  gap:10px;
  justify-content:center;
  margin-top:14px;
}

button{
  flex:1;
  height:44px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#0c0c0c;
  color:#fff;
  font-size:16px;
}

button.primary{
  background:#4cff8f20;
  border-color:#4cff8f60;
}

button:disabled{
  opacity:.45;
}

/* ===== 提示 ===== */
.hint{
  margin-top:12px;
  font-size:12px;
  color:#9a9a9a;
  text-align:center;
  line-height:1.4;
}

/* ===== 閃爍提示 ===== */
.flash{
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:0;
  transition:opacity .12s linear;
}

.flash.on{ opacity:.22; }
.flash.warn{ background:var(--warn); }
.flash.danger{ background:var(--danger); }
.flash.accent{ background:var(--accent); }

</style>
</head>

<body>
<div class="flash" id="flash"></div>

<div class="wrap">
<div class="panel">

<header>
  <h1>L-sit 循環計時器</h1>
  <div class="chip" id="stateChip">待機</div>
</header>

<div class="grid">
  <label>組數<input id="sets" type="number" value="4"></label>
  <label>支撐秒<input id="hold" type="number" value="20"></label>
  <label>休息秒<input id="rest" type="number" value="60"></label>
  <label>準備秒<input id="prep" type="number" value="10"></label>
</div>

<div class="stage">
  <div class="badge" id="badge">準備好後按「開始」</div>
  <div class="time" id="display">00:20</div>
  <div class="sub">音量請用 iPhone 音量鍵控制</div>
</div>

<div class="controls">
  <button class="primary" id="start">開始</button>
  <button id="pause" disabled>暫停</button>
  <button id="reset">重置</button>
</div>

<div class="hint">
  建議：加入主畫面使用，訓練時不要鎖屏
</div>

</div>
</div>

<script>
/* JS 邏輯沿用你上一版，不影響版面 */
(() => {
  const $=id=>document.getElementById(id);
  const sets=$("sets"),hold=$("hold"),rest=$("rest"),prep=$("prep");
  const display=$("display"),startBtn=$("start"),pauseBtn=$("pause"),resetBtn=$("reset");
  let timer=null,remaining=0;

  const fmt=s=>String(Math.floor(s/60)).padStart(2,"0")+":"+String(s%60).padStart(2,"0");

  startBtn.onclick=()=>{
    if(timer) return;
    remaining=parseInt(hold.value,10)||20;
    display.textContent=fmt(remaining);
    timer=setInterval(()=>{
      if(remaining<=0){
        clearInterval(timer);timer=null;return;
      }
      remaining--;
      display.textContent=fmt(remaining);
    },1000);
  };
  resetBtn.onclick=()=>{
    if(timer){clearInterval(timer);timer=null;}
    display.textContent=fmt(parseInt(hold.value,10)||20);
  };
})();
</script>
</body>
</html>
